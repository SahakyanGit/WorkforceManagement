@using WorkforceManagement.DTO.Models;
@using System.Text;
@model  IEnumerable<EmployeeDto>
@{
    ViewData["Title"] = "Index";
    string value = "false";
    byte[] b = new byte[] { };
    var exist = Context.Session.TryGetValue("IsAuth", out b);
    value = b != null ? Encoding.ASCII.GetString(b) : value;
    bool isAuthenticated = Convert.ToBoolean(value);
}

@if (isAuthenticated)
{
    <link rel="stylesheet" href="~/lib/bootstrap-year-calendar/css/bootstrap-year-calendar.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-theme.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <br />
    <button class="btn-calendar btn btn-primary">Show Calendar</button>
    <br />
    <div class="calender-div" data-provide="calendar" style="display:none"></div>
    <input type="tel" placeholder="add new skill" id="skill" class="form-control" name="skill" size="30" />
    <br />
    <button id="skill-btn" class="btn btn-primary" value="add">Add skill</button>
    <br />
    <div id="bar"></div>
    <script>
        $('#skill-btn').click(function () {
            console.log("aaa")
            var value = document.getElementById("skill").value;
            //$.getJSON("../js/data.json", function (data) {
            //    console.log(data)
            //    items = data;
            //})
            if (value == "") {
                alert("Please add skill");
            }
            else if (/\S /.test(value) || value.indexOf("#") > -1) {
                alert("can't contain white spaces or symbols")
            }
            else {
                $("#bar").append("<label>" + (value) + '   ' + "</label>")
                $('#bar').append("<button data-toggle='progressbar' data-target='#" + value + "'  data-value='0' class='btn btn-danger'>don't know</button><button data-toggle='progressbar' data-target='#" + value + "' data-value='25' class='btn btn-warning'>basic</button><button data-toggle='progressbar' data-target='#" + value + "' data-value='50' class='btn btn-info'>normal</button><button data-toggle='progressbar' data-target='#" + value + "' data-value='75' class='btn btn-primary'>good</button><button data-toggle='progressbar' data-target='#" + value + "' data-value='100' class='btn btn-success'>complete</button><div id='" + value + "' class='progress'><div class='progress-bar' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%;'><span class='sr-only'>0% Complete</span></div></div>");

                //items.count++;
                //console.log(items.count);
                //var filepath = "../js/data.json";
                //localStorage.setItem(filepath, JSON.stringify(items))
                //console.log("success");

                //var file = new File(txtFile, "write");
                //var str = JSON.stringify(items);

                //log("opening file...");
                //file.open();
                //log("writing file..");
                //file.writeline(str);
                //file.close();
            }
        });
    </script>
            <script src="~/js/calendar.js"></script>
            <script src="~/js/progressbar.js"></script>
            <script src="~/lib/bootstrap-year-calendar/js/bootstrap-year-calendar.js"></script>
}
else
{

    <h2>Please log in</h2>
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <title>Bootstrap Example</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="~/lib/bootstrap/dist/js/bootstrap.js">
    </head>
    <body>
        <div class="container">
            <h2>Users</h2>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>email</th>
                        <th>password</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>admin@gmail.com</td>
                        <td>8888</td>
                    </tr>
                    <tr>
                        <td>user@gmail.com</td>
                        <td>1111</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
}